# ✅ 一次到位模板包（拷贝即可用）

> 目标：通过 Google AdSense + Amazon Associates 高通过率上线，并把导购页的转化率打到可观水准。以下以 **Hugo** 为例，同时兼容任意静态站（把片段塞到你的布局/组件里即可）。

------

## 0) 站点级修复（5分钟）

**把旧域名替换为你的主域：** `https://www.ai-smarthomehub.com/`

- 在 `privacy-policy` 与 `terms-of-service` 两页里，把 `https://fzero1925.github.io/ai-smarthome/` 全局替换为主域。
- 若你用 Hugo，直接在 **content** 文件里搜索替换；或在 Markdown front matter 里加 `canonicalURL` 指向主域。

------

## 1) 合规：Consent Mode v2 + CMP 占位（EEA/UK/CH 必备）

> 先放置 Consent 默认状态，再由 CMP 回调 **update**。Funding Choices、OneTrust、CookieYes、Osano、Concord 等都能接上。

### `layouts/partials/consent.html`

```html
<!-- 放在 <head> 最前，所有页面都 include -->
<script>
  // Consent Mode v2 — 默认“拒绝”，等待 CMP 回调后再更新
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('consent', 'default', {
    'ad_storage': 'denied',
    'analytics_storage': 'denied',
    'ad_user_data': 'denied',
    'ad_personalization': 'denied'
  });
  // 可选：在默认拒绝时对广告数据做进一步收敛
  gtag('set', 'ads_data_redaction', true);
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXX"></script>
<script>
  gtag('js', new Date());
  gtag('config', 'G-XXXXXXXX', { 'anonymize_ip': true });
</script>

<!-- 你的 CMP 完成收集后调用此回调（示例接口名，按 CMP 文档对接） -->
<script>
  window.__applyConsent = function (consent) {
    gtag('consent', 'update', {
      'ad_storage':           consent.ad ? 'granted' : 'denied',
      'analytics_storage':    consent.analytics ? 'granted' : 'denied',
      'ad_user_data':         consent.ad_user_data ? 'granted' : 'denied',
      'ad_personalization':   consent.ad_personalization ? 'granted' : 'denied'
    });
  };
</script>
```

**在 baseof.html 里引入：**

```html
{{ partial "consent.html" . }}
```

> ⚠️ 先别手写 Cookie 弹窗。等你在 AdSense 后台开启 **Privacy & messaging / CMP**，把它生成的脚本粘到 `consent.html` 下方即可。

------

## 2) AdSense 响应式广告位（合规布局）

> 先准备 2–3 个广告位：首段后、正文中、文末/侧栏。全部标注为“Advertisement/广告”。

### `layouts/partials/adsense-slot.html`

```html
<!-- 文章内通用广告位：
     使用前：把 data-ad-client / data-ad-slot 换成你的值 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-XXXXXXXXXXXXXXX"
     data-ad-slot="YYYYYYYYYY"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
```

**文章模板里调用：**

```html
<div class="ad-label">Advertisement</div>
{{ partial "adsense-slot.html" . }}
```

------

## 3) Amazon 合规 CTA（未接入 PA-API 前专用）

> **未经 PA-API 且账号未通过前，** 一律不要写死价格和星级。按钮统一写“查看价格/Check price on Amazon”。

### `layouts/shortcodes/aff-btn.html`

```html
<a href="{{ .Get "url" }}"
   class="inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-semibold shadow hover:shadow-md transition"
   rel="nofollow sponsored noopener" target="_blank">
  {{ with .Get "label" }}{{ . }}{{ else }}查看价格（Amazon）{{ end }}
</a>
```

**文章中使用：**

```md
{{< aff-btn url="https://www.amazon.com/dp/ASIN?tag=yourtag-20" >}}
```

> 通过审核并开通 **PA-API** 后，才能显示价格；且需在价格旁边显示时间戳与“价格可能变动”文案（见第 6 节）。

------

## 4) 导购页骨架（提高转化）

### `content/articles/_template-smart-category.md`

```md
---
title: "Best Smart Plugs 2025: 完整购买指南（兼容 Alexa/Google/Matter）"
date: 2025-09-01
categories: ["smart-plugs"]
description: "3 款明确推荐 + 对比表 + 选购要点 + 安装与排错"
author: "编辑部"
---

> **结论先行**：
- **Top Pick** — 型号A：最均衡（Matter + 能耗统计）
- **Best Value** — 型号B：入门价位但做工靠谱
- **Also Great** — 型号C：重度自动化用户（Thread 网状）

{{< table "对比表" >}}
| 型号 | 协议 | 额定功率 | App评分 | 适合谁 |
|---|---|---:|---:|---|
| A | Matter/Thread | 1800W | 4.6 | 想要全屋互联的人 |
| B | Wi‑Fi (2.4G) | 1500W | 4.4 | 预算有限的新手 |
| C | Zigbee | 1800W | 4.5 | 已有 Zigbee 网关 |
{{< /table >}}

### 购买要点
- **协议兼容**：优先 Matter/Thread；旧设备看是否需桥接。
- **额定功率**：国标/美标请核对电流；热器具须≥1500W。
- **本地控制**：断网是否可用、是否支持局域网 API。

### 我们如何选（E-E-A-T）
- 参数来源：品牌白皮书/认证数据库/公开评测实验
- 测试范围（若未实测请改为“资料评估”）：功耗、延迟、稳定性、温升
- 更新频率：每月巡检价格与可用性；读者反馈通道

### 安装与排错
- 安装步骤（插图）
- 常见错误与解决

### FAQ
Q: 支持 HomeKit 吗？
A: 型号A/B支持；型号C需桥接。

> **声明**：本文可能包含联盟链接；若你通过链接购买，我们可能获得佣金，这不会影响你的最终价格。
```

> 你只需把 **真实型号与参数** 填入即可发布。

------

## 5) 结构化数据（JSON‑LD）

> 只用 **ItemList / Product** 的基本字段；**先不要上 AggregateRating**（避免“自评/自托”风险）。

### 类目/导购页（ItemList）

```html
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "itemListElement": [
    {"@type":"ListItem","position":1,"url":"https://www.ai-smarthomehub.com/reviews/plug-a/"},
    {"@type":"ListItem","position":2,"url":"https://www.ai-smarthomehub.com/reviews/plug-b/"},
    {"@type":"ListItem","position":3,"url":"https://www.ai-smarthomehub.com/reviews/plug-c/"}
  ]
}
</script>
```

### 单品评测（Product — 无自评星级）

```html
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "August Wi‑Fi Smart Lock (4th Gen)",
  "brand": {"@type":"Brand","name":"August"},
  "model": "4th Gen",
  "isAccessoryOrSparePartFor": "Deadbolt",
  "url": "https://www.ai-smarthomehub.com/reviews/august-wifi-lock/",
  "image": ["https://www.ai-smarthomehub.com/images/august-lock.webp"],
  "review": [{
    "@type":"Review",
    "reviewBody": "安装简单、App 体验好、自动解锁稳定。",
    "author": {"@type":"Person","name":"编辑部"}
  }]
}
</script>
```

> 价格与库存 **只有在 PA‑API 拉取并展示时间戳时** 再加入 `offers` 字段。

------

## 6) （通过 PA‑API 后）价格与时间戳

> 满足 Amazon 要求：价格旁边显示**时间戳**和**“价格可能变动”**提示；且非图片类内容最多缓存 24h。

### 价格组件（Hugo shortcode） `layouts/shortcodes/price.ts.html`

```html
{{/* 输入：price, currency, timestampISO, detailURL */}}
<span class="price">{{ .Get "price" }} {{ .Get "currency" }}</span>
<small class="opacity-70 ml-2">(as of {{ .Get "timestampISO" }} )</small>
<a class="ml-2 underline" href="{{ .Get "detailURL" }}" target="_blank" rel="nofollow sponsored noopener">Details</a>

<div class="text-xs mt-1">Product prices and availability are accurate as of the date/time indicated and are subject to change. Any price and availability information displayed on Amazon at the time of purchase will apply to the purchase of this product.</div>
```

**文章中使用：**

```md
{{< price.ts price="$229.99" currency="USD" timestampISO="2025-09-08T10:30:00-07:00" detailURL="https://www.amazon.com/dp/ASIN" >}}
```

> ⚠️ 展示“$229.99”仅在你已用 **PA‑API** 实时拉到了该值时使用；否则用 **{{< aff-btn >}}** 的“查看价格”按钮替代。

------

## 7) 页首披露与站点披露（通过后启用）

### 站点级（页脚或 About 区）：

```html
<p><em>As an Amazon Associate I earn from qualifying purchases.</em></p>
```

### 文章页首（含 FTC 友好口吻）：

```html
<p>本文包含联盟链接；通过这些链接购买，我们可能获得佣金，这不会影响你的最终价格。</p>
```

------

## 8) “评测方法”独立页面骨架（提升 E‑E‑A‑T）

### `content/about/methodology.md`

```md
---
title: 我们的选品与评测方法
description: 数据来源、测评范围、更新节奏、勘误机制
---

## 我们如何选择
- 市场覆盖：不同价位/协议（Matter/Thread/Zigbee/Wi‑Fi）
- 适配场景：入门/进阶/专业自动化

## 数据来源
- 官方规格、认证数据库、固件发布说明、公开实验

## 测评范围（若无实测，请如实标注“资料评估”）
- 延迟、稳定性、能耗、温升、App 可用性

## 更新与勘误
- 每月巡检在售与价格；读者反馈 72 小时内处理；勘误日志公开
```

------

## 9) robots 与 sitemap（索引干净）

**static/robots.txt**

```
User-agent: *
Disallow:
Sitemap: https://www.ai-smarthomehub.com/sitemap.xml
```

> 保证只保留 **www** 版本，非 www 做 301 到 www，避免重复收录。

------

## 10) 首屏性能与图片

- 图片统一 WebP/AVIF，`loading="lazy"`；
- 关键域名 `preconnect`（fonts、cdn、images）
- 控制首屏 JS（无需的第三方脚本延迟加载）

------

## 11) 最小可行“首页英雄区 + 三板斧”

### `layouts/partials/home-hero.html`

```html
<section class="py-10">
  <h1 class="text-3xl font-extrabold">AI Smart Home Hub</h1>
  <p class="mt-2">三款明确推荐 · 对比表 · 安装与排错</p>
  <div class="mt-4 flex gap-3">
    <a class="btn" href="/categories/smart-plugs/">立即选插座</a>
    <a class="btn" href="/about/methodology/">评测方法</a>
  </div>
</section>
```

------

## 12) 申请前自检清单（精简版）

-  站点与政策页域名一致（隐私/条款/披露）
-  已接入 **Google 认证 CMP** + **Consent Mode v2**（EEA/UK/CH）
-  全站无手写静态价格/星级（未接入 PA‑API 前）
-  每个主要品类 ≥2 篇：导购 + 对比 + 安装/排错
-  文章结构含 Top Picks / 对比表 / CTA / FAQ / 更新日志
-  结构化数据：`ItemList`/`Product`，**不含自评 AggregateRating**
-  AdSense 广告位 2–3 个，标注 “Advertisement”
-  邮件订阅文案合规（说明用途、可随时退订）

------

### 用法小抄

- **Hugo**：把 `partials` 放到 `layouts/partials/`，`shortcodes` 放到 `layouts/shortcodes/`；在 `baseof.html` 挂上 `{{ partial "consent.html" . }}`。
- **Next.js/VuePress 等**：把 `consent.html` 的脚本移到 `_document` 或全局布局里；按钮组件按框架语法重写。